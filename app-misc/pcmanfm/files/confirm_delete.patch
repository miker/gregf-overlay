diff -Naur pcmanfm-0.4.1.1/data/ui/prefdlg.glade pcmanfm-0.4.1.1-new/data/ui/prefdlg.glade
--- pcmanfm-0.4.1.1/data/ui/prefdlg.glade	2008-04-12 16:38:20.000000000 -0700
+++ pcmanfm-0.4.1.1-new/data/ui/prefdlg.glade	2008-05-18 02:08:36.000000000 -0700
@@ -1,4 +1,4 @@
-<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd"><glade-interface><widget class="GtkDialog" id="prefdlg"><property name="visible">True</property><property name="title" translatable="yes">Preference</property><property name="type_hint">GDK_WINDOW_TYPE_HINT_DIALOG</property><child internal-child="vbox"><widget class="GtkVBox" id="dialog-vbox1"><property name="visible">True</property><child><widget class="GtkNotebook" id="notebook"><property name="visible">True</property><property name="can_focus">True</property><child><widget class="GtkVBox" id="vbox1"><property name="visible">True</property><property name="border_width">2</property><child><widget class="GtkHBox" id="hbox1"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label1"><property name="visible">True</property><property name="xpad">2</property><property name="ypad">2</property><property name="label" translatable="yes">On-disk file name encoding:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkEntry" id="filename_encoding"><property name="width_request">80</property><property name="visible">True</property><property name="can_focus">True</property><property name="max_length">30</property><property name="invisible_char">*</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property></packing></child><child><widget class="GtkHBox" id="hbox2"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">4</property><child><widget class="GtkLabel" id="label2"><property name="visible">True</property><property name="label" translatable="yes">Bookmarks:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkComboBox" id="bm_open_method"><property name="visible">True</property><property name="items" translatable="yes">Opened in Current Tab
+<?xml version="1.0" encoding="UTF-8" standalone="no"?><!DOCTYPE glade-interface SYSTEM "glade-2.0.dtd"><!--Generated with glade3 3.4.5 on Sat May 17 01:12:42 2008 --><glade-interface><widget class="GtkDialog" id="prefdlg"><property name="visible">True</property><property name="title" translatable="yes">Preference</property><property name="type_hint">GDK_WINDOW_TYPE_HINT_DIALOG</property><child internal-child="vbox"><widget class="GtkVBox" id="dialog-vbox1"><property name="visible">True</property><child><widget class="GtkNotebook" id="notebook"><property name="visible">True</property><property name="can_focus">True</property><child><widget class="GtkVBox" id="vbox1"><property name="visible">True</property><property name="border_width">2</property><child><widget class="GtkHBox" id="hbox1"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label1"><property name="visible">True</property><property name="xpad">2</property><property name="ypad">2</property><property name="label" translatable="yes">On-disk file name encoding:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkEntry" id="filename_encoding"><property name="width_request">80</property><property name="visible">True</property><property name="can_focus">True</property><property name="max_length">30</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property></packing></child><child><widget class="GtkHBox" id="hbox2"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">4</property><child><widget class="GtkLabel" id="label2"><property name="visible">True</property><property name="label" translatable="yes">Bookmarks:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkComboBox" id="bm_open_method"><property name="visible">True</property><property name="items" translatable="yes">Opened in Current Tab
 Opened in New Tab
 Opened in New Window</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="position">1</property></packing></child><child><widget class="GtkHBox" id="hbox6"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">4</property><child><widget class="GtkLabel" id="label7"><property name="visible">True</property><property name="label" translatable="yes">Size of Big Icons:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkComboBox" id="big_icon_size"><property name="visible">True</property><property name="items">96x96
 72x72
@@ -13,7 +13,7 @@
 24x24
 20x20
 16x16
-12x12</property></widget><packing><property name="expand">False</property><property name="position">3</property></packing></child></widget><packing><property name="expand">False</property><property name="position">2</property></packing></child><child><widget class="GtkCheckButton" id="show_thumbnail"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Display image files with supported format as thumbnails</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">3</property></packing></child><child><widget class="GtkHBox" id="hbox3"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label3"><property name="visible">True</property><property name="label" translatable="yes">Max size of files displayed as thumbnails:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkSpinButton" id="max_thumb_size"><property name="visible">True</property><property name="can_focus">True</property><property name="adjustment">0 0 32768 1 10 10</property><property name="climb_rate">1</property></widget><packing><property name="position">1</property></packing></child><child><widget class="GtkLabel" id="label4"><property name="visible">True</property><property name="xpad">2</property><property name="label">KB</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">2</property></packing></child></widget><packing><property name="expand">False</property><property name="position">4</property></packing></child><child><widget class="GtkHBox" id="hbox4"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label5"><property name="visible">True</property><property name="label" translatable="yes">Terminal:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkComboBoxEntry" id="terminal"><property name="visible">True</property><property name="items"></property><child internal-child="entry"><widget class="GtkEntry" id="comboboxentry-entry1"></widget></child></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="position">5</property></packing></child></widget><packing><property name="tab_fill">False</property></packing></child><child><widget class="GtkLabel" id="general_tab_label"><property name="visible">True</property><property name="label" translatable="yes">_General</property><property name="use_underline">True</property></widget><packing><property name="type">tab</property><property name="tab_fill">False</property></packing></child><child><widget class="GtkVBox" id="desktop_page"><property name="visible">True</property><property name="border_width">2</property><child><widget class="GtkCheckButton" id="show_desktop"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Show file icons on desktop</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="padding">4</property></packing></child><child><widget class="GtkFrame" id="frame2"><property name="visible">True</property><property name="border_width">4</property><property name="label_xalign">0</property><child><widget class="GtkVBox" id="vbox2"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkHBox" id="hbox7"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkCheckButton" id="show_wallpaper"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Wallpaper:</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkFileChooserButton" id="wallpaper"><property name="visible">True</property><property name="title" translatable="yes">Please select an image file</property></widget><packing><property name="position">1</property></packing></child></widget></child><child><widget class="GtkHBox" id="hbox11"><property name="visible">True</property><child><widget class="GtkLabel" id="label15"><property name="visible">True</property><property name="label" translatable="yes">Mode:</property></widget><packing><property name="expand">False</property></packing></child><child><widget class="GtkComboBox" id="wallpaper_mode"><property name="visible">True</property><property name="items" translatable="yes">Stretch to fill the entire screen
+12x12</property></widget><packing><property name="expand">False</property><property name="position">3</property></packing></child></widget><packing><property name="expand">False</property><property name="position">2</property></packing></child><child><widget class="GtkCheckButton" id="show_thumbnail"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Display image files with supported format as thumbnails</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">3</property></packing></child><child><widget class="GtkCheckButton" id="confirm_delete"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Ask for confirmation when deleting files</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">4</property></packing></child><child><widget class="GtkHBox" id="hbox3"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label3"><property name="visible">True</property><property name="label" translatable="yes">Max size of files displayed as thumbnails:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkSpinButton" id="max_thumb_size"><property name="visible">True</property><property name="can_focus">True</property><property name="adjustment">0 0 32768 1 10 10</property><property name="climb_rate">1</property></widget><packing><property name="position">1</property></packing></child><child><widget class="GtkLabel" id="label4"><property name="visible">True</property><property name="xpad">2</property><property name="label">KB</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">2</property></packing></child></widget><packing><property name="expand">False</property><property name="position">5</property></packing></child><child><widget class="GtkHBox" id="hbox4"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label5"><property name="visible">True</property><property name="label" translatable="yes">Terminal:</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkComboBoxEntry" id="terminal"><property name="visible">True</property><property name="items"></property><child internal-child="entry"><widget class="GtkEntry" id="comboboxentry-entry1"></widget></child></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="position">6</property></packing></child></widget><packing><property name="tab_fill">False</property></packing></child><child><widget class="GtkLabel" id="general_tab_label"><property name="visible">True</property><property name="label" translatable="yes">_General</property><property name="use_underline">True</property></widget><packing><property name="type">tab</property><property name="tab_fill">False</property></packing></child><child><widget class="GtkVBox" id="desktop_page"><property name="visible">True</property><property name="border_width">2</property><child><widget class="GtkCheckButton" id="show_desktop"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Show file icons on desktop</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="padding">4</property></packing></child><child><widget class="GtkFrame" id="frame2"><property name="visible">True</property><property name="border_width">4</property><property name="label_xalign">0</property><child><widget class="GtkVBox" id="vbox2"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">2</property><child><widget class="GtkHBox" id="hbox7"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkCheckButton" id="show_wallpaper"><property name="visible">True</property><property name="can_focus">True</property><property name="label" translatable="yes">Wallpaper:</property><property name="use_underline">True</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkFileChooserButton" id="wallpaper"><property name="visible">True</property><property name="title" translatable="yes">Please select an image file</property></widget><packing><property name="position">1</property></packing></child></widget></child><child><widget class="GtkHBox" id="hbox11"><property name="visible">True</property><child><widget class="GtkLabel" id="label15"><property name="visible">True</property><property name="label" translatable="yes">Mode:</property></widget><packing><property name="expand">False</property></packing></child><child><widget class="GtkComboBox" id="wallpaper_mode"><property name="visible">True</property><property name="items" translatable="yes">Stretch to fill the entire screen
 Stretch to fit the screen
 Center on the screen
-Tile the image to fill the entire screen</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="position">1</property></packing></child></widget></child><child><widget class="GtkLabel" id="label14"><property name="visible">True</property><property name="label" translatable="yes">&lt;b&gt;Wallpaper&lt;/b&gt;</property><property name="use_markup">True</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">1</property></packing></child><child><widget class="GtkFrame" id="frame1"><property name="visible">True</property><property name="border_width">4</property><property name="label_xalign">0</property><child><widget class="GtkHBox" id="hbox5"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">10</property><child><widget class="GtkHBox" id="hbox8"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label10"><property name="visible">True</property><property name="label" translatable="yes">Background</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkColorButton" id="bg_color1"><property name="visible">True</property><property name="can_focus">True</property><property name="response_id">0</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property></packing></child><child><widget class="GtkHBox" id="hbox9"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label11"><property name="visible">True</property><property name="label" translatable="yes">Text</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkColorButton" id="text_color"><property name="visible">True</property><property name="can_focus">True</property><property name="response_id">0</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">1</property></packing></child><child><widget class="GtkHBox" id="hbox10"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label13"><property name="visible">True</property><property name="label" translatable="yes">Shadow</property></widget></child><child><widget class="GtkColorButton" id="shadow_color"><property name="visible">True</property><property name="can_focus">True</property><property name="receives_default">True</property><property name="response_id">0</property><property name="color">#000000000000</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">2</property></packing></child></widget></child><child><widget class="GtkLabel" id="label6"><property name="visible">True</property><property name="label" translatable="yes">&lt;b&gt;Colors&lt;/b&gt;</property><property name="use_markup">True</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="expand">False</property><property name="position">2</property></packing></child><child><widget class="GtkExpander" id="expander1"><property name="visible">True</property><property name="can_focus">True</property><child><widget class="GtkCheckButton" id="show_wm_menu"><property name="visible">True</property><property name="can_focus">True</property><property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property><property name="label" translatable="yes">Show menus provided by WM when desktop is clicked</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget></child><child><widget class="GtkLabel" id="label12"><property name="visible">True</property><property name="label" translatable="yes">Advanced</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="padding">4</property><property name="position">3</property></packing></child></widget><packing><property name="position">1</property></packing></child><child><widget class="GtkLabel" id="label9"><property name="visible">True</property><property name="label" translatable="yes">_Desktop</property><property name="use_underline">True</property></widget><packing><property name="type">tab</property><property name="position">1</property><property name="tab_fill">False</property></packing></child></widget><packing><property name="pack_type">GTK_PACK_END</property><property name="position">2</property></packing></child><child internal-child="action_area"><widget class="GtkHButtonBox" id="dialog-action_area1"><property name="visible">True</property><property name="layout_style">GTK_BUTTONBOX_END</property><child><widget class="GtkButton" id="cancelbutton"><property name="visible">True</property><property name="can_focus">True</property><property name="can_default">True</property><property name="label">gtk-cancel</property><property name="use_stock">True</property><property name="response_id">-6</property></widget></child><child><widget class="GtkButton" id="okbutton"><property name="visible">True</property><property name="can_focus">True</property><property name="can_default">True</property><property name="has_default">True</property><property name="label">gtk-ok</property><property name="use_stock">True</property><property name="response_id">-5</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="pack_type">GTK_PACK_END</property></packing></child></widget></child></widget></glade-interface>
+Tile the image to fill the entire screen</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="position">1</property></packing></child></widget></child><child><widget class="GtkLabel" id="label14"><property name="visible">True</property><property name="label" translatable="yes">&lt;b&gt;Wallpaper&lt;/b&gt;</property><property name="use_markup">True</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">1</property></packing></child><child><widget class="GtkFrame" id="frame1"><property name="visible">True</property><property name="border_width">4</property><property name="label_xalign">0</property><child><widget class="GtkHBox" id="hbox5"><property name="visible">True</property><property name="border_width">4</property><property name="spacing">10</property><child><widget class="GtkHBox" id="hbox8"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label10"><property name="visible">True</property><property name="label" translatable="yes">Background</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkColorButton" id="bg_color1"><property name="visible">True</property><property name="can_focus">True</property><property name="response_id">0</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property></packing></child><child><widget class="GtkHBox" id="hbox9"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label11"><property name="visible">True</property><property name="label" translatable="yes">Text</property></widget><packing><property name="expand">False</property><property name="fill">False</property></packing></child><child><widget class="GtkColorButton" id="text_color"><property name="visible">True</property><property name="can_focus">True</property><property name="response_id">0</property></widget><packing><property name="expand">False</property><property name="fill">False</property><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">1</property></packing></child><child><widget class="GtkHBox" id="hbox10"><property name="visible">True</property><property name="spacing">2</property><child><widget class="GtkLabel" id="label13"><property name="visible">True</property><property name="label" translatable="yes">Shadow</property></widget></child><child><widget class="GtkColorButton" id="shadow_color"><property name="visible">True</property><property name="can_focus">True</property><property name="receives_default">True</property><property name="response_id">0</property><property name="color">#000000000000</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="padding">4</property><property name="position">2</property></packing></child></widget></child><child><widget class="GtkLabel" id="label6"><property name="visible">True</property><property name="label" translatable="yes">&lt;b&gt;Colors&lt;/b&gt;</property><property name="use_markup">True</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="expand">False</property><property name="position">2</property></packing></child><child><widget class="GtkExpander" id="expander1"><property name="visible">True</property><property name="can_focus">True</property><child><widget class="GtkCheckButton" id="show_wm_menu"><property name="visible">True</property><property name="can_focus">True</property><property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK</property><property name="label" translatable="yes">Show menus provided by WM when desktop is clicked</property><property name="response_id">0</property><property name="draw_indicator">True</property></widget></child><child><widget class="GtkLabel" id="label12"><property name="visible">True</property><property name="label" translatable="yes">Advanced</property></widget><packing><property name="type">label_item</property></packing></child></widget><packing><property name="padding">4</property><property name="position">3</property></packing></child></widget><packing><property name="position">1</property></packing></child><child><widget class="GtkLabel" id="label9"><property name="visible">True</property><property name="label" translatable="yes">_Desktop</property><property name="use_underline">True</property></widget><packing><property name="type">tab</property><property name="position">1</property><property name="tab_fill">False</property></packing></child></widget><packing><property name="pack_type">GTK_PACK_END</property><property name="position">2</property></packing></child><child internal-child="action_area"><widget class="GtkHButtonBox" id="dialog-action_area1"><property name="visible">True</property><property name="layout_style">GTK_BUTTONBOX_END</property><child><widget class="GtkButton" id="cancelbutton"><property name="visible">True</property><property name="can_focus">True</property><property name="can_default">True</property><property name="label">gtk-cancel</property><property name="use_stock">True</property><property name="response_id">-6</property></widget></child><child><widget class="GtkButton" id="okbutton"><property name="visible">True</property><property name="can_focus">True</property><property name="can_default">True</property><property name="has_default">True</property><property name="label">gtk-ok</property><property name="use_stock">True</property><property name="response_id">-5</property></widget><packing><property name="position">1</property></packing></child></widget><packing><property name="expand">False</property><property name="pack_type">GTK_PACK_END</property></packing></child></widget></child></widget></glade-interface>
\ No newline at end of file
diff -Naur pcmanfm-0.4.1.1/src/pref-dialog.c pcmanfm-0.4.1.1-new/src/pref-dialog.c
--- pcmanfm-0.4.1.1/src/pref-dialog.c	2008-03-19 23:23:20.000000000 -0700
+++ pcmanfm-0.4.1.1-new/src/pref-dialog.c	2008-05-18 01:57:51.000000000 -0700
@@ -71,6 +71,7 @@
     GtkWidget* terminal;
     GtkWidget* big_icon_size;
     GtkWidget* small_icon_size;
+    GtkWidget* confirm_delete; //ADDED for confirm_delete patch
 
     GtkWidget* show_desktop;
     GtkWidget* show_wallpaper;
@@ -120,6 +121,7 @@
     terminal = ptk_ui_xml_get_widget( dlg,  "terminal" );
     big_icon_size = ptk_ui_xml_get_widget( dlg,  "big_icon_size" );
     small_icon_size = ptk_ui_xml_get_widget( dlg,  "small_icon_size" );
+    confirm_delete = ptk_ui_xml_get_widget( dlg,  "confirm_delete" ); //ADDED for confirm_delete patch
 
     if ( '\0' == ( char ) app_settings.encoding[ 0 ] )
         gtk_entry_set_text( GTK_ENTRY( encoding ), "UTF-8" );
@@ -143,6 +145,9 @@
     gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON( show_thumbnail ),
                                    app_settings.show_thumbnail );
 
+    gtk_toggle_button_set_active ( GTK_TOGGLE_BUTTON( confirm_delete ), //ADDED for confirm_delete patch
+    										  app_settings.confirm_delete );
+
     for ( i = 0; i < G_N_ELEMENTS( terminal_programs ); ++i )
     {
         gtk_combo_box_append_text ( GTK_COMBO_BOX ( terminal ), terminal_programs[ i ] );
@@ -247,6 +252,8 @@
         app_settings.show_thumbnail = gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON( show_thumbnail ) );
         app_settings.max_thumb_size = ( ( int ) gtk_spin_button_get_value (
                                          GTK_SPIN_BUTTON( max_thumb_size ) ) ) << 10;
+        
+        app_settings.confirm_delete = gtk_toggle_button_get_active( GTK_TOGGLE_BUTTON( confirm_delete ) ); //ADDED for confirm_delete patch
 
         ibig_icon = gtk_combo_box_get_active( GTK_COMBO_BOX( big_icon_size ) );
         if ( ibig_icon >= 0 )
diff -Naur pcmanfm-0.4.1.1/src/ptk/ptk-file-misc.c pcmanfm-0.4.1.1-new/src/ptk/ptk-file-misc.c
--- pcmanfm-0.4.1.1/src/ptk/ptk-file-misc.c	2008-03-04 13:13:24.000000000 -0800
+++ pcmanfm-0.4.1.1-new/src/ptk/ptk-file-misc.c	2008-05-18 01:57:51.000000000 -0700
@@ -33,6 +33,8 @@
 #include "vfs-execute.h"
 #include "ptk-app-chooser.h"
 
+#include "../settings.h"
+
 void ptk_delete_files( GtkWindow* parent_win,
                        const char* cwd,
                        GList* sel_files )
@@ -48,15 +50,17 @@
     if ( ! sel_files )
         return ;
 
-    dlg = gtk_message_dialog_new( parent_win,
-                                  GTK_DIALOG_MODAL,
-                                  GTK_MESSAGE_WARNING,
-                                  GTK_BUTTONS_YES_NO,
-                                  _( "Really delete selected files?" ) );
-    ret = gtk_dialog_run( GTK_DIALOG( dlg ) );
-    gtk_widget_destroy( dlg );
-    if ( ret != GTK_RESPONSE_YES )
-        return ;
+	 if ( app_settings.confirm_delete == TRUE) { //ADDED for confirm_delete patch
+		 dlg = gtk_message_dialog_new( parent_win,
+												 GTK_DIALOG_MODAL,
+												 GTK_MESSAGE_WARNING,
+												 GTK_BUTTONS_YES_NO,
+												 _( "Really delete selected files?" ) );
+		 ret = gtk_dialog_run( GTK_DIALOG( dlg ) );
+		 gtk_widget_destroy( dlg );
+		 if ( ret != GTK_RESPONSE_YES )
+			  return ;
+    }
 
     file_list = NULL;
     for ( sel = sel_files; sel; sel = g_list_next( sel ) )
diff -Naur pcmanfm-0.4.1.1/src/settings.c pcmanfm-0.4.1.1-new/src/settings.c
--- pcmanfm-0.4.1.1/src/settings.c	2008-05-11 02:03:48.000000000 -0700
+++ pcmanfm-0.4.1.1-new/src/settings.c	2008-05-18 01:57:51.000000000 -0700
@@ -39,6 +39,7 @@
 const int view_mode_default = PTK_FB_ICON_VIEW;
 const int sort_order_default = PTK_FB_SORT_BY_NAME;
 const int sort_type_default = GTK_SORT_ASCENDING;
+const gboolean confirm_delete_default = TRUE; //ADDED for confirm_delete patch
 
 gboolean show_desktop_default = FALSE;
 const gboolean show_wallpaper_default = FALSE;
@@ -115,6 +116,8 @@
     else if ( 0 == strcmp( name, "singleInstance" ) )
         app_settings.singleInstance = atoi( value );
     */
+    else if ( 0 == strcmp( name, "confirm_delete" ) ) //ADDED for confirm_delete patch
+        app_settings.confirm_delete = atoi( value );
 }
 
 static void color_from_str( GdkColor* ret, const char* value )
@@ -227,6 +230,7 @@
     app_settings.open_bookmark_method = open_bookmark_method_default;
     /* app_settings.iconTheme = NULL; */
     app_settings.terminal = NULL;
+    app_settings.confirm_delete = confirm_delete_default; //ADDED for confirm_delete patch
 
     /* Window State */
     app_settings.splitter_pos = 160;
@@ -341,7 +345,9 @@
         */
         if ( app_settings.terminal )
             fprintf( file, "terminal=%s\n", app_settings.terminal );
-
+        if ( app_settings.confirm_delete != confirm_delete_default) //ADDED for confirm_delete patch
+			   fprintf( file, "confirm_delete=%d\n", app_settings.confirm_delete );
+		  
         fputs( "\n[Window]\n", file );
         fprintf( file, "width=%d\n", app_settings.width );
         fprintf( file, "height=%d\n", app_settings.height );
diff -Naur pcmanfm-0.4.1.1/src/settings.h pcmanfm-0.4.1.1-new/src/settings.h
--- pcmanfm-0.4.1.1/src/settings.h	2008-03-19 06:41:10.000000000 -0700
+++ pcmanfm-0.4.1.1-new/src/settings.h	2008-05-18 01:57:51.000000000 -0700
@@ -21,6 +21,7 @@
     int side_pane_mode;
     gboolean show_thumbnail;
     int max_thumb_size;
+    gboolean confirm_delete; //ADDED for confirm_delete patch
 
     int big_icon_size;
     int small_icon_size;
